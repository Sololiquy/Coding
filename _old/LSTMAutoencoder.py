import numpy as np
from keras.models import Sequential
from keras.layers import LSTM, Dense, RepeatVector, TimeDistributed

# Define your data
data_array = [
    [2825601, 1504880, 88615],
    [2926316, 1522031, 89835],
    [3035413, 1517167, 90599],
    [3146081, 1526178, 45573],
    [3256857, 1533493, 45843],
    [3359348, 1542415, 46214],
    [3475206, 1544495, 46805],
    [3588819, 1555754, 47713],
    [3700504, 1574678, 48938],
    [3810960, 1577821, 49945],
    [3929479, 1592968, 50818],
    [4030927, 1601965, 51816],
    [4126688, 1603495, 53132],
    [4216983, 1614322, 55084],
    [4303950, 1609041, 72412],
    [4380378, 2120931, -61146],
    [4425640, 1739828, -77641],
    [4467569, 1596310, -80155],
    [4502742, 1593623, 55732],
    [4555455, 1582204, 82958],
    [4596267, 1575549, 81364],
    [4626576, 1570440, 79266],
    [4666813, 1560202, 72010],
    [4720497, 1554297, 64990],
    [4726945, 1547052, 61188],
    [4782851, 1544272, 56388],
    [4812737, 1540090, 48001],
    [4849078, 1534312, 45610],
    [4907955, 1535393, 45920],
    [4951561, 1529697, 43900],
    [4980818, 1520812, 42246],
    [4997482, 1525962, 44710],
    [5036093, 1514470, 46789],
    [5015545, 1507421, 47375],
    [4985875, 1502365, 43693],
    [4836156, 1481346, 37447],
    [4736048, 1472140, 30990],
    [4731775, 1481144, 26709],
    [4738357, 1494558, 25379],
    [4706989, 1487026, 19910],
    [4647365, 1477380, 11542],
    [4702399, 1484318, 3096],
    [4643826, 1468017, -2608],
    [4652255, 1464235, -3474],
    [4681292, 1480775, -2576],
    [4714197, 1487222, -1651],
    [4762487, 1518695, -1856],
    [4796960, 1526135, -4332],
    [4744298, 1544482, -11356],
    [4682542, 1559353, -28804],
    [4680026, 1580688, -42697],
    [4679118, 1591456, -64261],
    [4661603, 1595707, -83985],
    [4657532, 1611652, -97733],
    [4678356, 1806890, -102669],
    [4745818, 1679144, -102380],
    [4819324, 1697947, -101108],
    [4923101, 1718514, -103121],
    [4927000, 1763465, -108492],
    [4912941, 1780272, -98211],
    [4919751, 1807440, -77010],
    [5028613, 1842810, -54051],
    [5028089, 1875355, -38499],
    [4917392, 1888518, -36670],
    [4856532, 1903725, -37324],
    [4779601, 1932676, -37991],
    [4717655, 1971512, -38653],
    [4633621, 2004491, -39282],
    [4587901, 2001885, -39878],
    [4558836, 2032338, -40567]
]

# Convert data to a NumPy array
data_array = np.array(data_array)

# Reshape input into [samples, timesteps, features]
n_samples, n_timesteps, n_features = 1, len(data_array), len(data_array[0])
data_array = data_array.reshape((n_samples, n_timesteps, n_features))

model = Sequential()
model.add(LSTM(100, activation='relu', input_shape=(n_timesteps, n_features)))
model.add(RepeatVector(n_timesteps))
model.add(LSTM(100, activation='relu', return_sequences=True))
model.add(TimeDistributed(Dense(n_features)))  # Output layer with the same number of features as input
model.compile(optimizer='adam', loss='mse')


# Fit model
model.fit(data_array, data_array, epochs=300, verbose=0)

# Reconstruct the input sequence
predicted_data = model.predict(data_array, verbose=0)
reconstructed_sequence = predicted_data[0]

# Print the reconstructed sequence
print(reconstructed_sequence)
